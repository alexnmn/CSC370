<!DOCTYPE html>
<html>

<head>
    <title>CSC 370 Project Home</title>
    <script type="text/javascript">
    function createTable() {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                console.log("index");
                document.getElementById("table").innerHTML = xmlhttp.responseText;
            }
        };
        xmlhttp.open("GET", "index.php", true);
        xmlhttp.send();
    }

    function query(){
        var form = document.getElementById("form");
        var t = form.t.value;
        var q = form.q.value;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                console.log("Query");
                document.getElementById("query").innerHTML = xmlhttp.responseText;
            }
        };
        xmlhttp.open("GET", "generateTable.php?t=" + t + "&q=" + q, true);
        xmlhttp.send();
    }

    </script>
    <style>
    table {
        width: 100%;
        max-width: 850px;
        border-collapse: collapse;
        margin: 5px;
    }
    
    #table td,#table th {
        border: 1px solid black;
        padding: 5px;
    }

    #query td,#query th {
        border: 1px solid black;
        padding: 5px;
    }

    </style>
</head>

<body onload="createTable()">
    <h1>Saiddit</h1>
    <table>
        <tr>
            <form action="login.php">
                <td>
                    Username:
                    <input type="text" name="u" value="" />
                </td>
                <td>
                    Password:
                    <input type="text" name="p" value="" />
                    <input type="submit" value="Login">
                </td>
            </form>
        </tr>
        <tr>
            <form id="form" onsubmit="query();return false">
                <td>
                    Request:
                    <select name="t" style="padding-right:10px">
                        <option value="">Select</option>
                        <option value="1">Get User's Posts</option>
                        <option value="2">Get User's Friends' Posts</option>
                        <option value="3">Get User's Subscribed Subsaidits</option>
                        <option value="4">Get User's Favorite Posts</option>
                        <option value="5">Get User's Friends Favorite Posts</option>
                        <option value="6">Get User's Friends' Subscribed Subsaidits</option>
                        <option value="7">Get All Users</option>
                    </select>
                </td>
                <td>
                    Query Paramater:
                    <input type="text" name="q" value="" />
                    <input type="submit" value="Search" />
                </td>
            </form>
        </tr>
    </table>
    <h2>Query Response</h2>
    <div style="margin-top:10px" id="query"></div>
    <h2>Top Posts</h2>
    <table style="margin-top:10px" id="table"></table>
</body>

</html>